# Pharos 脚本故障排除指南

## 🚨 常见问题及解决方案

### 1. 脚本秒退问题

**现象**: 脚本运行后立即结束，日志显示"脚本插件执行完成"但没有具体操作日志

**可能原因及解决方案**:

#### A. 钱包配置问题
```
❌ 未检测到钱包，请确保已正确配置钱包
```
**解决方案**:
- 确保在FourAir钱包管理页面至少添加了一个钱包
- 检查钱包私钥格式是否正确（64位十六进制字符串）
- 确保钱包名称不为空

#### B. 网络连接问题
```
❌ 创建provider失败: Network error
```
**解决方案**:
- 检查网络连接是否正常
- 尝试关闭VPN或代理
- 检查防火墙设置
- Pharos测试网RPC可能临时不可用，稍后重试

#### C. 功能全部禁用
```
⚠️ 所有功能都被禁用，脚本将直接退出
```
**解决方案**:
- 在脚本配置中至少启用一个功能：
  - ✅ 启用水龙头领取
  - ✅ 启用每日签到  
  - ✅ 启用PHRS转账
  - ✅ 启用代币交换

### 2. RPC连接问题

**现象**: 
```
⚠️ 网络连接测试失败: timeout
📝 将继续尝试执行，可能是RPC限制导致
```

**解决方案**:
- Pharos测试网RPC: `https://testnet.dplabs-internal.com`
- 可能是临时性网络问题，脚本会继续尝试执行
- 如果持续失败，建议稍后重试

### 3. API访问问题

**现象**:
```
❌ 403 Forbidden: Check API access or proxy
```

**解决方案**:
- 检查网络环境，某些地区可能需要代理访问
- 确保没有被API服务端限制IP
- 尝试更换网络环境

### 4. 钱包余额不足

**现象**:
```
⚠️ PHRS 余额不足，跳过转账
⚠️ USDC 余额不足，跳过 swap
```

**解决方案**:
- 首先运行水龙头领取功能获取测试币
- 确保钱包有足够的PHRS用于转账和gas费用
- 检查代币余额是否足够进行交换操作

### 5. 水龙头重复领取

**现象**:
```
⚠️ 今日水龙头已领取，下一可用时间：2024-12-20 10:30:00
```

**解决方案**:
- 每个钱包每天只能领取一次水龙头
- 等待冷却时间结束后重新尝试
- 这是正常现象，不是错误

## 🔧 调试步骤

### 1. 检查脚本配置
```javascript
// 确保配置正确
📋 执行配置:
   - 钱包数量: 1
   - 水龙头: ✅
   - 签到: ✅  
   - 转账: ✅ (10次)
   - 交换: ✅ (10次)
   - 代理: 未使用
```

### 2. 检查环境状态
```javascript
🔍 环境检测:
   - ethers模块: ✅
   - crypto模块: ✅
   - 配置参数: 10 项
```

### 3. 检查网络连接
```javascript
🌐 网络配置:
   - 网络名称: Pharos Testnet
   - 链ID: 688688
   - RPC地址: https://testnet.dplabs-internal.com

🧪 测试网络连接...
✅ 区块链连接成功，当前区块高度: 12345
```

## ⚡ 快速解决流程

### 步骤1: 基础检查
1. ✅ 确保钱包已配置且私钥正确
2. ✅ 确保至少启用一个功能
3. ✅ 检查网络连接状态

### 步骤2: 运行诊断
1. 查看脚本启动日志
2. 检查是否出现"钱包创建成功"消息
3. 观察网络连接测试结果

### 步骤3: 针对性修复
- **钱包问题** → 重新配置钱包
- **网络问题** → 更换网络环境
- **功能问题** → 检查功能启用状态

## 🆘 联系支持

如果按照上述步骤仍无法解决问题，请提供以下信息：

1. **完整的错误日志**
2. **脚本配置截图**
3. **网络环境信息**
4. **操作系统版本**

## 📝 更新日志

**2024-12-19**
- ✅ 增加详细的错误检测和日志输出
- ✅ 新增环境检测功能
- ✅ 完善网络连接测试
- ✅ 添加钱包配置验证
- ✅ 提供智能故障诊断建议

---

**提示**: 大多数问题都是由网络连接或钱包配置引起的，按照上述步骤检查通常能快速解决问题。 