# FourAir 更新日志

## 🚀 v1.3.2 (2025-06-06)

### 🐛 Bug修复
- **数据库配置**: 修复服务端数据库配置问题，统一使用`tutorials.sqlite`数据库
- **教程数据**: 修复教程数据字段映射，确保`imageUrl`字段正确显示
- **代理导入**: 修复代理批量导入类型错误，支持用户选择的代理类型
- **项目结构**: 删除空目录和多余文件，优化项目结构

### 🔄 优化
- 清理项目中的多余文件和空目录
- 更新版本号到1.3.2

### 📦 安装包信息
- 📦 **安装包**：`FourAir-Setup-1.3.2.exe`
- 🔗 **下载地址**：GitHub Releases
- ✅ **支持系统**：Windows 10/11 (x64)

---

## 🚀 v1.3.1 (2025-06-06)

### 🐛 Bug修复
- **教程模块**: 修复网络安全模块导致教程页面无法加载的问题
- **WebView**: 恢复外部链接拦截功能，点击教程内链接自动在浏览器打开
- **安全设置**: 优化WebView安全配置，允许教程内容正常加载

### 🔧 技术改进
- **打包优化**: 排除更多不必要文件，减小安装包体积
- **错误处理**: 增强教程加载失败时的用户体验

### 📦 安装包信息
- 📦 **安装包**：`FourAir-Setup-1.3.1.exe` (约108MB)
- 🔗 **下载地址**：GitHub Releases
- ✅ **支持系统**：Windows 10/11 (x64)

---

## 🚀 v1.3.0 (2024-12-19)

### ✨ **新功能和重大改进**

#### 🔐 **认证系统优化**
- **修复登录注册功能**：解决了网络连接失败的问题
- **API端点优化**：支持开发/生产环境自动切换
  - 开发环境：`http://localhost:3001`
  - 生产环境：`http://106.75.5.215:3001`
- **CORS配置修复**：修复了跨域请求被阻止的问题，支持Electron应用协议

#### 📱 **响应式设计大幅改进**
- **登录注册页面全面优化**：
  - 🔄 支持垂直滚动，解决小窗口内容被遮挡问题
  - 📏 多断点响应式适配（800px/700px/480px/360px）
  - 🎨 优化小屏幕字体、间距和布局
  - 📱 移动端友好的触摸体验
  - 🖱️ 自定义滚动条和滚动提示器

#### 🛠️ **脚本开发规范化**
- **重构Irys脚本**：完全符合FourAir脚本开发规范
  - ✅ 添加标准的`getConfig()`函数
  - ✅ 使用安全的`context.http`API
  - ✅ 移除禁用模块（fs、setTimeout等）
  - ✅ 支持配置参数化和代理设置
- **日志输出优化**：去除冗余前缀，提供更清晰的执行日志

### 🔧 **技术改进**

#### 🌐 **服务器端增强**
- **依赖管理**：修复sqlite3等关键依赖缺失问题
- **错误处理**：改进服务器启动和数据库连接的错误处理
- **安全性**：增强CORS安全配置，支持多种请求来源

#### 🎯 **用户体验优化**
- **界面适配**：支持更多屏幕尺寸和分辨率
- **性能优化**：减少不必要的重复日志输出
- **稳定性**：修复了多个潜在的连接和认证问题

### 🐛 **Bug修复**

- 🔴 **修复登录注册页面网络请求失败**
- 🔴 **修复小窗口下表单内容被遮挡**
- 🔴 **修复服务器CORS跨域请求问题**
- 🔴 **修复服务器依赖包缺失导致的启动失败**
- 🔴 **修复脚本执行时的代理配置问题**

### 📋 **部署说明**

#### 客户端更新
- 📦 **安装包**：`FourAir-Setup-1.3.0.exe` (113MB)
- 🔄 **自动更新**：支持从v1.2.1平滑升级

#### 服务器端更新
- 📁 **服务器包**：`server-update.zip` 
- ⚡ **部署步骤**：
  ```bash
  # 上传服务器更新包
  scp server-update.zip user@server:/home/
  
  # 解压并安装依赖
  unzip server-update.zip -d server-temp
  cp -r server-temp/* server/
  cd server && npm install
  
  # 重启服务
  pm2 restart four-air-server
  ```

### 🎯 **下个版本计划**

- 🔮 增强脚本插件生态系统
- 🌍 多语言支持
- 🎨 UI/UX进一步优化
- 🛡️ 安全性增强

---

### 📞 **技术支持**

如遇到问题，请：
1. 确保服务器端已更新并重启
2. 使用最新的客户端安装包
3. 检查网络连接和代理配置

**重要提醒**：从v1.2.1升级到v1.3.0时，请确保服务器端同步更新，否则可能出现认证功能异常。 